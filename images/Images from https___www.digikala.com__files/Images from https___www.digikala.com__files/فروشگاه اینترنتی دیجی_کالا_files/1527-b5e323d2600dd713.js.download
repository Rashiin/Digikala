"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1527],{81527:function(e,t,n){n.d(t,{L:function(){return I}});var r=n(26042),i=n(69396),a=n(67294),o=n(14924),u=n(99534),l=n(828),s=n(29815),d=n(87146),f=n(73286),c=n(49725);var v=n(57258),g=n(34351),p=n(11163),Z={},m={items:Z,pages:Z,data:{},fetched:!1};function h(e){var t=e.apiMethod,n=e.apiData,u=e.queryParams,d=e.disabled,h=void 0!==d&&d,y=e.onSuccess,P=e.onError,S=e.itemsKey,M=void 0===S?"products":S,C=e.isPagination,E=void 0!==C&&C,I=e.ssrData,R=e.notHandledByUseSSR,K=void 0!==R&&R,w=e.onPageChange,b=(0,p.useRouter)(),x=(0,a.useRef)(null),k=(0,a.useRef)(!1),D=(0,a.useState)(u.page||1),F=D[0],q=D[1],T=(0,a.useState)(O({oldData:m,newPage:I,itemsKey:M})),Q=T[0],A=T[1];(0,a.useEffect)((function(){(null===u||void 0===u?void 0:u.page)&&F!==u.page&&q(null===u||void 0===u?void 0:u.page)}),[null===u||void 0===u?void 0:u.page]);var H=(0,a.useMemo)((function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,c.kK)(e)||+e.pagerCurrentPage<1||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage+1}(Q.data),t=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,c.kK)(e)||+e.pagerCurrentPage<2||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage-1}(Q.data);return{nextPageParam:e,hasNextPage:!!e,previousPageParam:t,hasPreviousPage:!!t}}),[Q.data]),V=H.nextPageParam,j=H.hasNextPage,N=H.previousPageParam,U=H.hasPreviousPage,L=(0,a.useMemo)((function(){return(0,r.Z)({},(0,f.cleanObject)((0,r.Z)({},n||{},u||{})))}),[n,u]),B=(0,a.useRef)(L),X=(0,a.useMemo)((function(){return(0,i.Z)((0,r.Z)({},L),(0,o.Z)({},g.tn,u.page||F))}),[L,F]),_=(0,a.useRef)(!1),Y=(0,a.useRef)(K),z=(0,a.useRef)(L),G=h||!K&&(k.current||!Y.current||(0,c.Xy)(L,z.current)&&1===F),W=E||1===F||_.current||u.page,$=function(e){if(e&&(0,f.isEmpty)(e))A((function(e){return(0,i.Z)((0,r.Z)({},e),{fetched:!0,items:W?[]:e.items})}));else{var t=function(e){var t=e.newPage,n=e.reset,a=O({oldData:(0,i.Z)((0,r.Z)({},Q),{items:W||n?Z:Q.items}),newPage:t,itemsKey:M});return A(a),a}({newPage:e});B.current=L,_.current=!1,k.current=!1,null===y||void 0===y||y(e,t)}},J=(0,v.V)({apiMethod:t,apiData:X,onSuccess:$,onError:P,disabled:G}),ee=J.pending,te=J.hasError,ne=J.reload;(0,a.useEffect)((function(){(0,c.kK)(I)||K||Y.current||($(I),Y.current=!0,z.current=(0,r.Z)({},L))}),[I]),(0,a.useEffect)((function(){var e=function(e){var t=new URL(e,window.location.href).pathname;k.current=!(0,c.Xy)(x.current,t),x.current=t};return b.events.on("routeChangeStart",e),function(){b.events.off("routeChangeStart",e)}}),[]),(0,a.useEffect)((function(){ie({page:(null===u||void 0===u?void 0:u.page)||1})}),[b.asPath]),(0,a.useEffect)((function(){G&&!K&&(Y.current||(0,c.Xy)(z.current,L))?$(I):_.current=!(0,c.Xy)(L,B.current)}),[L]);var re=function(e){(0,f.isNumber)(e)&&q(e)},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,a=e.updatePageParam,o=void 0!==a&&a;A((0,i.Z)((0,r.Z)({},Q),{fetched:!1,items:[]})),o?null===w||void 0===w||w(n):F===n?ne():re(n)},ae=(ee||!Q.fetched||_.current)&&!te;return(0,i.Z)((0,r.Z)({},Q),{items:W&&ae?Z:Q.items,hasError:te,pending:ae,hasPreviousPage:U,hasNextPage:j,fetchNextPage:function(){j&&q(V)},fetchPreviousPage:function(){U&&q(N)},fetchPage:re,addItem:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];A((function(e){var n=(0,r.Z)({},(null===e||void 0===e?void 0:e.items)||{});return t.forEach((function(e){var t=e.page,r=e.index,i=e.item;n[t]=(0,c.QO)(n[t],r,i)})),(0,i.Z)((0,r.Z)({},e),{items:n})}))},removeItem:function(e){var t=e.itemIndex;A((function(e){var n,a=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var r=(0,l.Z)(n,2),i=r[0],a=r[1];return e.isFound?e:t<a.length+e.count?{page:i,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),u=a.page,d=a.index,f=(0,i.Z)((0,r.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},u,(0,s.Z)((0,c.As)(null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n[u],d))));return(0,i.Z)((0,r.Z)({},e),{items:f})}))},updateItem:function(e){var t=e.itemIndex,n=e.newData;A((function(e){var a,u,d,f=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var r=(0,l.Z)(n,2),i=r[0],a=r[1];return e.isFound?e:t<a.length+e.count?{page:i,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),v=f.page,g=f.index,p=(0,i.Z)((0,r.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},v,(0,s.Z)((0,c.Ht)(null===e||void 0===e||null===(a=e.items)||void 0===a?void 0:a[v],(0,r.Z)({},(null===e||void 0===e||null===(u=e.items)||void 0===u||null===(d=u[v])||void 0===d?void 0:d[g])||{},n),g))));return(0,i.Z)((0,r.Z)({},e),{items:p})}))},resetItems:ie,page:F,apiData:X,isAPIDataChangedRef:_})}function O(e){var t,n=e.oldData,a=n.items,u=void 0===a?Z:a,l=n.data,s=n.pages,d=void 0===s?Z:s,f=e.newPage,v=e.itemsKey,g=(null===f||void 0===f||null===(t=f.pager)||void 0===t?void 0:t.pagerCurrentPage)||1;return{items:(0,i.Z)((0,r.Z)({},u),(0,o.Z)({},g,(null===f||void 0===f?void 0:f[v])||[])),data:y({data:f,itemsKey:v,oldData:l}),pages:(0,i.Z)((0,r.Z)({},d),(0,o.Z)({},g,g)),fetched:!(0,c.kK)(f)}}function y(e){var t=e.data,n=e.itemsKey,r=e.oldData;if(!(0,f.isObject)(t)||(0,f.isArray)(t)||(0,c.kK)(t)||(0,f.isEmpty)(t))return r;t[n];return(0,u.Z)(t,[n].map(d.Z))}var P=n(66261),S=n(72593),M={isOpen:!1,filterKey:null,filterTitle:null,filterItem:null},C={};function E(e){var t=e.defaultActiveFilters,n=void 0===t?C:t,v=e.shouldSaveOnChange,Z=e.shouldScrollOnChange,m=void 0===Z||Z,h=e.disableQueryParams,O=function(e){var t,a=e.activeFilters,u=void 0===a?n:a,l=e.shallow,s=e.fragment,d=(0,f.cleanObject)((0,i.Z)((0,r.Z)({},u),(t={},(0,o.Z)(t,g.uR,u[g.uR]||U[g.uR]),(0,o.Z)(t,g.fH,U[g.fH]),(0,o.Z)(t,g.tn,void 0),t)));ce({newUrl:(0,S.mn)((0,f.setQueries)({queries:d,url:window.location.pathname}),s),scroll:m,shallow:l})},y=function(){W(!1)},E=function(e){var t=e.shallow;y(),O({activeFilters:_,shallow:t})},I=function(){y()},R=function(){O({activeFilters:(0,o.Z)({},g.uR,ie)}),y()},K=function(){ue(!1)},w=function(){te((0,i.Z)((0,r.Z)({},_),(0,o.Z)({},g.uR,ie))),K()},b=function(){te((0,i.Z)((0,r.Z)({},_),(0,o.Z)({},g.uR,ie))),K()},x=function(){fe(!1)},k=(0,p.useRouter)(),D=k.asPath,F=k.push,q=k.replace,T=k.query,Q=k.pathname,A=k.isReady,H=(k.events,(0,a.useState)((0,r.Z)({},n))),V=H[0],j=H[1],N=(0,a.useRef)(!1),U=(0,a.useMemo)((function(){return h?V:(0,f.getSearchParams)(D)}),[D,V]),L=(0,a.useMemo)((function(){U[g.uR],U[g.fH],U[g.tn];var e=(0,u.Z)(U,[g.uR,g.fH,g.tn].map(d.Z));return!(0,f.isEmpty)(e)}),[U]),B=(0,a.useMemo)((function(){return Object.entries(T).reduce((function(e,t){var n=(0,l.Z)(t,2),a=n[0],u=n[1];return-1!==Q.indexOf(a)?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,u)):(0,r.Z)({},e)}),{})}),[Q,T]),X=(0,a.useState)(n),_=X[0],Y=X[1],z=(0,a.useState)(!1),G=z[0],W=z[1],$=(0,a.useState)(M),J=$[0],ee=$[1],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return Y((function(){return(0,c.mf)(e)?function(t){return(0,f.cleanObject)(e(t))}:(0,f.cleanObject)(e)}))},ne=(0,a.useMemo)((function(){return!(0,c.Xy)(U,_)}),[_,U]),re=null===_||void 0===_?void 0:_[g.uR],ie=null===U||void 0===U?void 0:U[g.uR],ae=(0,a.useState)(!1),oe=ae[0],ue=ae[1],le=(0,a.useMemo)((function(){return!(0,f.isEqualString)(ie,re)}),[re,ie]),se=(0,a.useState)(!1),de=se[0],fe=se[1],ce=function(e){var t=e.newUrl,n=e.scroll,i=e.shallow,a=void 0===i||i,o=e.appendQuery,u=void 0!==o&&o;if(h){var l=(0,f.getSearchParams)(t);return j((0,r.Z)({},u?U:C,l)),void(n&&P.NY.scrollToTop())}N.current?(N.current=!0,n&&P.NY.scrollToTop(),F(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:m),shallow:a})):q(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:m),shallow:a})},ve=function(e){var t,n=e.query;ce({newUrl:(0,f.setQueries)({queries:(t={},(0,o.Z)(t,g.fH,n),(0,o.Z)(t,g.tn,void 0),t),url:window.location.pathname}),scroll:!0})},ge=function(){var e=(0,f.cleanObject)((0,r.Z)({},n||C,U));te(e)};(0,a.useEffect)((function(){ge()}),[D,V]);var pe=(0,a.useMemo)((function(){return(0,S.S3)(D)}),[D]);return{filterExtra:J,activeFilters:_,filterOnClick:function(e){var t=e.isOpenable,n=e.filterKey,i=e.filterItem,a=e.filterType,u=e.filterTitle,l=e.filterOptionId,d=e.filterOptionMax,p=e.filterOptionMin,Z=e.filterOptionValueMin,m=e.filterOptionValueMax,h=e.shouldSendDataToServer,y=e.shallow;if(t)ee((function(e){var t=e.isOpen,r=e.filterKey;return{isOpen:!(t&&(0,f.isEqualString)(n,r)),filterTitle:u,filterKey:n,filterItem:i}}));else{var P=function(e){var t,n=e.filterKey,i=e.filterType,a=e.activeFilters,u=e.filterOptionId,l=e.filterOptionMin,d=e.filterOptionMax,v=e.filterOptionValueMin,p=e.filterOptionValueMax,Z=(0,f.isObject)(n)&&!(0,f.isArray)(n),m=Z?n.keyId:n,h=null===n||void 0===n?void 0:n.keyCode,O=(null===a||void 0===a?void 0:a[h])||C,y=Z?null===(t=a[h])||void 0===t?void 0:t[m]:a[n];if((0,f.isEqualString)(g.kQ.CHECKBOX,i)){var P=function(e){var t,n=e.filterOptionId,r=e.filterItem,i=e.filterKey;if(null===r||void 0===r||null===(t=r.find)||void 0===t?void 0:t.call(r,(function(e){return(0,f.isEqualString)(e,n)}))){var a,u=null===r||void 0===r||null===(a=r.filter)||void 0===a?void 0:a.call(r,(function(e){return!(0,f.isEqualString)(e,n)}));return(0,o.Z)({},i,(0,f.isEmpty)(u)?void 0:u)}return(0,o.Z)({},i,(0,s.Z)(r||[]).concat([n]))}({filterItem:y,filterKey:m,filterOptionId:u});return(0,r.Z)({},a||C,Z?(0,o.Z)({},h,(0,r.Z)({},O,P)):P)}if([g.kQ.RADIO,g.kQ.BUTTON].includes(i)){var S=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,n)}({filterItem:y,filterKey:n,filterOptionId:u});return(0,r.Z)({},a||C,Z?(0,o.Z)({},h,(0,r.Z)({},O,S)):S)}if((0,f.isEqualString)(g.kQ.SLIDER,i)){var M=function(e){var t,n=e.filterOptionMin,r=e.filterOptionMax,i=e.filterOptionValueMin,a=e.filterOptionValueMax,u=e.filterKey,l=(0,f.isEqualString)(r,a)&&(0,f.isEqualString)(n,i);return(0,o.Z)({},u,l?void 0:(t={},(0,o.Z)(t,g.LS,i),(0,o.Z)(t,g.o$,a),t))}({filterKey:n,filterOptionMax:d,filterOptionMin:l,filterOptionValueMin:v,filterOptionValueMax:p});return(0,r.Z)({},a||C,Z?(0,o.Z)({},h,(0,r.Z)({},O,M)):M)}if([g.kQ.BOOLEAN,g.kQ.SWITCH].includes(i)){var E=function(e){var t=e.filterItem,n=e.filterKey,r=e.filterOptionId;return(0,o.Z)({},n,(0,c.kK)(t)?r:void 0)}({filterItem:y,filterKey:n,filterOptionId:u});return(0,r.Z)({},a||C,Z?(0,o.Z)({},h,(0,r.Z)({},O,E)):E)}if((0,f.isEqualString)(g.kQ.CATEGORY_LIST,i)){var I=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,(0,c.kK)(n)?void 0:[n])}({filterKey:n,filterOptionId:u});return(0,r.Z)({},a||C,Z?(0,o.Z)({},h,(0,r.Z)({},O,I)):I)}return(0,r.Z)({},a||C)}({filterKey:n,filterType:a,filterOptionId:l,filterOptionMin:p,filterOptionMax:d,filterOptionValueMin:Z,filterOptionValueMax:m,activeFilters:_});h||v?O({activeFilters:P,shallow:y}):te(P)}},filterClear:R,filterIsModalOpen:G,filterOpenModal:function(){W(!0)},filterCloseModal:y,filterSaveChanges:E,filterCancelChanges:I,filterHasChanged:ne,activeSortId:re,submittedSortId:ie,sortOnClick:function(e){var t=e.sortOptionId;e.shouldSendDataToServer||v?(O({activeFilters:(0,i.Z)((0,r.Z)({},_),(0,o.Z)({},g.uR,t))}),K()):te((0,i.Z)((0,r.Z)({},_),(0,o.Z)({},g.uR,t)))},sortIsModalOpen:oe,sortOpenModal:function(){ue(!0)},sortCloseModal:K,sortSaveChanges:w,sortCancelChanges:b,sortHasChanged:le,allIsModalOpen:de,allOpenModal:function(){fe(!0)},allCloseModal:x,allSaveChanges:function(){w(),E(),x()},allCancelChanges:function(){b(),I(),x()},allClear:function(){R(),b(),x()},onSearch:ve,onPageChange:function(e){ce({newUrl:(0,f.setQueries)({queries:(0,o.Z)({},g.tn,e),url:window.location.href}),scroll:m,appendQuery:!0})},searchOnClearParam:function(){ve(C)},searchParam:U[g.fH],queryParams:U,reinitializeQueryParams:function(){ge()},urlParams:B,isReady:A,hasFilter:L,fragment:pe,changeFragment:function(e){O({fragment:e,activeFilters:_})}}}function I(e){var t=e.apiMethod,n=e.apiData,o=e.disabled,u=e.onSuccess,l=e.onError,s=e.itemsKey,d=e.isPagination,f=e.defaultActiveFilters,c=void 0===f?{}:f,v=e.defaultActiveSort,g=void 0===v?null:v,p=e.shouldSaveOnChange,Z=e.ssrData,m=e.shouldScrollOnChange,O=e.disableQueryParams,y=e.getSSRMethods,P=e.notHandledByUseSSR,S=E({defaultActiveFilters:c,defaultActiveSort:g,shouldSaveOnChange:p,shouldScrollOnChange:m,disableQueryParams:O,isPagination:d}),M=(0,a.useMemo)((function(){var e;return y?null===y||void 0===y||null===(e=y({query:S.urlParams||{}}))||void 0===e?void 0:e[0]:{apiMethod:t,apiData:n}}),[S.isReady,S.urlParams,n]),C=P||!!t,I=h((0,i.Z)((0,r.Z)({},M),{queryParams:S.queryParams,disabled:o,notHandledByUseSSR:C,onSuccess:u,onError:l,onPageChange:S.onPageChange,itemsKey:s,isPagination:d,ssrData:Array.isArray(Z)?null===Z||void 0===Z?void 0:Z[0]:Z}));return(0,r.Z)({},I,S)}},57258:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(29815),i=n(8100),a=n(11163),o=n(67294),u=n(61740),l=n(73286);function s(e){return function(t,n,r){var i=(0,o.useRef)(),a=e(t,n,r);(0,o.useEffect)((function(){void 0!==a.data&&(i.current=a.data)}),[a.data]);var u=(0,o.useCallback)((function(){i.current=void 0}),[]),l=void 0===a.data?i.current:a.data,s=void 0===a.data&&void 0!==i.current;return Object.assign({},a,{data:l,isLagging:s,resetLaggy:u})}}function d(e){var t=e.apiMethod,n=e.apiData,d=e.dependencies,f=e.onSuccess,c=void 0===f?function(){}:f,v=e.onError,g=void 0===v?function(){}:v,p=e.revalidateIfStale,Z=void 0!==p&&p,m=e.revalidateOnMount,h=void 0===m||m,O=e.revalidateOnFocus,y=void 0!==O&&O,P=e.revalidateOnReconnect,S=void 0!==P&&P,M=e.disabled,C=e.initialValue,E=((0,l.isFunction)(t.url)?t.url(n):t.url)+(0,l.stringifyUrlParams)(n),I=(0,a.useRouter)().isReady&&!M,R=(0,u.b6)(),K=(0,o.useState)(C||{})[0],w=function(){return t(n)},b=(0,o.useMemo)((function(){return[E].concat((0,r.Z)(d||[]))}),[d,E]),x=(0,i.ZP)(I?b:null,w,{onError:g,revalidateIfStale:Z,revalidateOnMount:h,revalidateOnFocus:y,revalidateOnReconnect:S,fallbackData:K,use:[s],shouldRetryOnError:!1}),k=x.data,D=x.error,F=x.mutate,q=x.isValidating,T=!D&&!k&&!!E&&!M||q&&!M;return(0,o.useEffect)((function(){!R&&!k||T||null===c||void 0===c||c(k)}),[k,T]),{data:k,pending:T,hasError:!!D,reload:function(){return F(w)},setPageData:function(e){return F(e,!1)}}}t.Z=d}}]);
