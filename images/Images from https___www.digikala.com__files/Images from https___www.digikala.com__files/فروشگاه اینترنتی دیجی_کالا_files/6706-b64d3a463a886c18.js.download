(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6706],{70853:function(e,n,t){"use strict";t.d(n,{X:function(){return Z}});var r=t(26042),o=t(69396),u=t(99534),i=t(85893),c=t(67294),s=t(73286),l=t(441),a=t(29815),f=t(49725);function d(e,n){if(null!=e)if((0,f.LQ)(e))e(n);else try{e.current=n}catch(t){throw new Error('Cannot assign value "'.concat(n,'" to ref "').concat(e,'"'))}}var v=t(88886),m=["bottom","height","left","right","top","width"];var p,h=new Map;function x(){var e=[];h.forEach((function(n,t){var r=t.getBoundingClientRect();(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.some((function(t){return e[t]!==n[t]}))})(r,n.rect)&&(n.rect=r,e.push(n))})),e.forEach((function(e){e.observers.forEach((function(n){return n(e.rect)}))})),p=window.requestAnimationFrame(x)}function b(e){return{subscribe:function(n){var t=h.size;return h.has(e)?h.get(e).observers.push(n):h.set(e,{rect:void 0,observers:[n]}),0===t&&x(),{unsubscribe:function(){var t=h.get(e);t&&(t.observers=t.observers.filter((function(e){return e!==n})),0===t.observers.length&&h.delete(e),0===h.size&&cancelAnimationFrame(p))}}}}}function w(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,c.useState)(e.current),r=t[0],o=t[1],u=(0,c.useRef)(!1),i=(0,c.useRef)(!1),s=(0,c.useState)(null),l=s[0],a=s[1];return(0,c.useLayoutEffect)((function(){e.current!==r&&o(e.current)}),[e,r]),(0,c.useLayoutEffect)((function(){var t=function(){null===o||void 0===o||o()},o=null,u=r;return i.current||(i.current=!0,u=e.current),u?(n&&(o=b(u).subscribe(a).unsubscribe),t):(v.yG&&console.warn("no element to measure its rect"),t)}),[n,r,e]),(0,c.useLayoutEffect)((function(){r&&!u.current&&(u.current=!0,a(r.getBoundingClientRect()))}),[r]),l}function g(e,n,t,r){return t?e(n,t,r):{visibility:"d-none"}}var I=(0,c.forwardRef)((function(e,n){var t=e.targetRef,l=e.positionCalculator,f=e.className,v=(0,u.Z)(e,["targetRef","positionCalculator","className"]),m=(0,c.useRef)(null),p=w(m),h=w(t),x=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,c.useMemo)((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(n){d(n,e)}))}}),(0,a.Z)(n))}(m,n),b=(0,s.classnames)("p-2 z-3 pos-absolute",{"z-3":!v.isInModal,"z-4":v.isInModal},f);return(0,i.jsx)("div",(0,o.Z)((0,r.Z)({ref:x},v),{style:(0,r.Z)({},g(l,h,p,null===v||void 0===v?void 0:v.menuSetToRight),v.style),className:b}))})),Z=(0,c.forwardRef)((function(e,n){return(0,i.jsx)(l.h,{elementType:"dk-popover",children:(0,i.jsx)(I,(0,o.Z)((0,r.Z)({},e),{ref:n}))})}))},84854:function(e,n,t){"use strict";t.d(n,{i:function(){return i}});var r=t(49725);function o(e,n){var t=c(e,n).bottom;return{top:"".concat(t?e.top-n.height+window.pageYOffset:e.top+e.height+window.pageYOffset,"px")}}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c(e,n).right;return{left:"".concat(r||t?e.right-n.width+window.pageXOffset:e.left+window.pageXOffset,"px")}}var i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.kK)(e)||(0,r.kK)(n)?{}:Object.assign({},u(e,n,t),o(e,n))};function c(e,n){var t={top:e.top-n.height<0,bottom:window.innerHeight<e.bottom+n.height,right:window.innerWidth<e.left+n.width,left:e.left+e.width-n.width<0};return{right:t.right&&!t.left,left:t.left&&!t.right,bottom:t.bottom&&!t.top,top:t.top&&!t.bottom}}},6706:function(e,n,t){"use strict";t.d(n,{gi:function(){return B},Ej:function(){return y},i4:function(){return j},z:function(){return Z},MT:function(){return I},bC:function(){return O}});var r=t(828),o=t(85893),u=t(67294),i=t(49725),c=t(88886),s=t(26042),l=t(69396),a=t(99534),f=t(29815);var d=t(95145);function v(e){var n=e.context,t=e.children,r=e.items,c=e.setItems,d=(0,u.useCallback)((function(e){var n=e.element,t=e.index,r=(0,a.Z)(e,["element","index"]);n&&c((function(e){var o;if((0,i.kK)(t))if(0===e.length)o=[(0,l.Z)((0,s.Z)({},r),{element:n,index:0})];else if(e.find((function(e){return e.element===n})))o=e;else{var u=e.findIndex((function(e){return!(!e.element||!n)&&(0,i.fQ)(e.element.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING)})),c=(0,l.Z)((0,s.Z)({},r),{element:n,index:u});o=-1===u?(0,f.Z)(e).concat([c]):(0,f.Z)(e.slice(0,u)).concat([c],(0,f.Z)(e.slice(u)))}else o=(0,f.Z)(e).concat([(0,l.Z)((0,s.Z)({},r),{element:n,index:t})]);return o.map((function(e,n){return(0,l.Z)((0,s.Z)({},e),{index:n})}))}))}),[]),v=(0,u.useCallback)((function(e){e&&c((function(n){return n.filter((function(n){return e!==n.element}))}))}),[]),m=(0,u.useMemo)((function(){return{items:r,setItem:d,removeItem:v}}),[r,d,v]);return(0,o.jsx)(n.Provider,{value:m,children:t})}function m(e,n,t){var r=(0,d.N)(),o=(0,u.useContext)(n),i=o.setItem,c=o.removeItem,a=o.items,v=null!==t&&void 0!==t?t:a.findIndex((function(n){return n.element===e.element})),m=function(e){var n=(0,u.useRef)(null);return(0,u.useEffect)((function(){n.current=e}),[e]),n.current}(a),p=a.some((function(e,n){var t;return e.element!==(null===m||void 0===m||null===(t=m[n])||void 0===t?void 0:t.element)}));return(0,u.useLayoutEffect)((function(){return e.element||r(),i((0,l.Z)((0,s.Z)({},e),{index:v})),function(){return c(e.element)}}),[r,v,i,p,c].concat((0,f.Z)(Object.values(e)))),v}var p,h,x=t(14924),b=t(73286),w=t(32258),g=t.n(w),I=(p="SelectorMenuItemContext",h={},(0,i.o8)(p,(0,s.Z)({items:[],setItem:i.ZT,removeItem:i.ZT},h))),Z=function(e){var n=e.onClick,t=e.disabled,r=e.hasHover,c=void 0===r||r,f=e.className,d=(0,a.Z)(e,["onClick","disabled","hasHover","className"]),v=(0,u.useRef)(null),p=(0,u.useContext)(j),h=p.focusedIndex,w=p.setFocusedIndex,Z=(0,u.useContext)(j).setIsOpen,y=m({element:v.current,disabled:t},I),C=(0,b.classnames)("d-block px-5 py-2 w-full",(0,x.Z)({disabled:t},g().SelectorMenuItem,c),f);(0,u.useLayoutEffect)((function(){var e;y===h&&(null===(e=v.current)||void 0===e||e.focus())}),[y,h]);var k=t?void 0:(0,i.UN)(n,(function(){Z(!1)}));return(0,o.jsx)("button",(0,l.Z)((0,s.Z)({},d),{type:"button",onClick:k,ref:v,onFocus:function(){-1!==y&&w(y)},className:C}))};c.yG&&(Z.displayName="SelectorMenuItem");var y=function(e){var n=(0,u.useContext)(j),t=n.isOpen,r=n.setIsOpen,c=n.SelectorMenuButtonRef,a=(0,i.UN)(e.onMouseUp,(function(e){e.stopPropagation()})),f=(0,i.UN)(e.onClick,(function(){r(!t)}));return(0,o.jsx)("button",(0,l.Z)((0,s.Z)({},e),{type:"button",onMouseUp:a,onClick:f,ref:c}))};c.yG&&(y.displayName="SelectorMenuButton");var C=t(61740),k=t(2077),M={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp"};function N(e,n){var t=(0,u.useContext)(e).items,r=n.callback,o=n.currentIndex,c=n.filter,s=n.itemKey,l=null!==o&&void 0!==o?o:-1;return function(e){var n;if(Object.keys(M).includes(e.key)){var u=c?t.filter(c):t;if(c&&(l=u.findIndex((function(e){return e.index===o}))),0!==u.length){e.preventDefault();var a={ArrowDown:function(){var e=u[(l+1)%u.length];r((0,i.kK)(s)?e:e[s])},ArrowUp:function(){var e=u[(l+u.length-1)%u.length];r((0,i.kK)(s)?e:e[s])}};null===(n=a[e.key])||void 0===n||n.call(a)}}}}var S=t(70853),R=t(84854),E=t(19122),O=function(e){var n=e.hasCloseButtonInBottomSheet,t=(0,a.Z)(e,["hasCloseButtonInBottomSheet"]),r=(0,u.useContext)(j),i=r.SelectorMenuButtonRef,c=r.isOpen,f=r.focusedIndex,d=r.setFocusedIndex,v=r.setIsOpen,m=N(I,{currentIndex:f,filter:function(e){return!e.disabled},callback:function(e){d(e)},itemKey:"index"}),p=(0,u.useRef)(),h=(0,E.C)().isDesktop,x=function(){return v(!1)};return(0,C.t$)({targetRef:p,handler:x}),h?c&&(0,o.jsx)(S.X,(0,l.Z)((0,s.Z)({isInModal:t.isInModal,className:t.popoverClassName,onKeyDown:m,onMouseUp:function(e){e.stopPropagation()},positionCalculator:R.i,targetRef:i},t),{children:(0,o.jsx)("div",{ref:p,className:"py-2 d-flex flex-column bg-000 radius shadow-fab-button overflow-hidden focus:none",children:t.children})})):(0,o.jsx)(k.Z,(0,l.Z)((0,s.Z)((0,l.Z)((0,s.Z)({isOpen:c},t),{contentClassName:"py-2",onClose:x}),n&&{hasAppTopBar:!0,appTopBarLeftSideFirstIcon:"close",appTopBarLeftSideFirstIconOnClick:x}),{reactResizeDetectorProps:{refreshMode:"debounce",refreshRate:0},children:(0,o.jsx)("div",{ref:p,children:t.children})}))};c.yG&&(O.displayName="SelectorMenuList");var j=(0,u.createContext)({isOpen:!1,setIsOpen:i.ZT,SelectorMenuButtonRef:{current:null},focusedIndex:0,setFocusedIndex:i.ZT}),B=function(e){var n=(0,u.useRef)(null),t=(0,u.useState)(!1),i=t[0],c=t[1],s=(0,r.Z)((0,u.useState)([]),2),l=s[0],a=s[1],f=(0,u.useState)(0),d=f[0],m=f[1],p=(0,u.useCallback)((function(){c(!1)}),[c]),h=(0,u.useCallback)((function(e){"Escape"===e.key&&p()}),[p]);return(0,u.useEffect)((function(){return i&&window.addEventListener("keydown",h),function(){i&&window.removeEventListener("keydown",h)}}),[i,p,h]),(0,o.jsx)(v,{context:I,items:l,setItems:a,children:(0,o.jsx)(j.Provider,{value:{isOpen:i,setIsOpen:c,SelectorMenuButtonRef:n,focusedIndex:d,setFocusedIndex:m},children:(0,o.jsx)("div",{children:e.children})})})};c.yG&&(B.displayName="SelectorMenu")},32258:function(e){e.exports={SelectorMenuItem:"SelectorMenuItem_SelectorMenuItem__V4N5o"}}}]);
